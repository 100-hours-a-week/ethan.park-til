## 새로 배운 내용 : 테스트

## 자동 테스트
: 테스트 스크립트나 도구를 사용해 소프트웨어를 자동으로 테스트 하는 과정 (Spring의 테스트 코드)
- 수동테스트와 다르게 사람의 개입이 적어 정확성이 높다
- 반복적인 검증 업무를 줄이고 빠르게 수행될 수 있어 개발자가 코드를 검증하는 데 걸리는 시간을 줄일 수 있다
- 개발자의 테스트 숙련도에 따라 테스트 품질이 결정된다
- 초기 설정과 유지보수에 많은 시간이 소요될 수 있다

## 인수 테스트

: 시스템이 비즈니스 요구사항을 만족해서 소유권을 넘기기 전에 수행하는 테스트 단계

- 시스템을 인수인계 하기 전 시스템이 비즈니스 요구사항과 일치하는지 마지막으로 검증하는 테스트 단계
- 수행하는 테스트는 일반적으로 테스트 수행 절차와 기댓값이 적힌 체크리스트로 관리
    - 체크리스트를 통해 요구사항에 부합하는지 판단
        - 부합한다면 테스트를 ‘성공’으로 체크, 아니면 ‘실패’로 체크
        - 엑셀 같은 도구나 테스트 관리 도구 등을 사용해 관리
- 테스트 단계 중 가장 마지막에 수행하는 단계
- 인수 테스트가 수동 테스트만으로 만들어진다면 수행에 있어 너무나 많은 비용이 발생하고 조직 전체의 퍼포먼스가 낮아져 되려 품질이 낮아진다
    - 테스트 절차를 사람이 직접 수행하고 결과를 눈으로 확인하는 데 많은 시간과 노력이 들기 때문
    - 수동 테스트는 시스템이 성장하면서 줄어들지 않고 늘어난다
        - 비용이 누적되고 소모적이다
- 자동 테스트를 실행하면 다음과 같은 내용 확인 가능
    - 테스트 성공/실패 여부
    - 어떤 클래스의 어떤 메서드의 어떤 라인을 실행했는지 확인
    - 전체 코드 중 테스트를 거친 코드의 비율을 나타내는 커버리지
- 자동 테스트의 이점
    - 문제가 생기는 상황이 어떤 상황인지 곧바로 파악 가능
    - 빠른 피드백
    - 한 번 작성된 테스트는 시스템에 남아 코드가 추가되거나 변경될 때마다 테스트하려는 대상이 초기 설계 의도에서 벗어나지 않았는지를 적극적으로 검사
        - 시스템의 안정성 보장

## Regression

: 시스템에서 정상적으로 제공하던 기능이 어떤 배포 시점을 기준으로 제대로 동작하지 않게 되는 상황

- 버그의 일종으로 Regression bug라고도 부름
- 해결방법
    - 테스트를 이용해 공통 코드가 초기 개발 의도를 지키고 있는지 능동적으로 감시
    - 회귀테스트
        - 회귀 버그를 탐지하고자 만들어진 테스트
        - 가급적 자동적으로 이루어져야 한다
            - 사람이 직접 하는 것은 비용이 많이 발생하고 부정확하여 비효율적
        - 자동화된 회귀 테스트는 프로젝트 확장과 유지보수 과정이 훨씬 단순해지고 쉬워진다

## 의도

- 우리는 타인이 작성한 코드에서 의도를 어떻게 파악 가능할까?
    - 직접 물어보는 방법
        - 원초적이면서 가장 확실
        - 하지만 작성자가 의도를 잊는 경우, 이미 퇴사한 경우
            - 커밋 내역이나 코드 리뷰 흔적으로 의도를 추측할 수 밖에 없다
    - 테스트는 개발자의 의도를 드러내는 방법이기 때문에 유용
        - 테스트 내용을 통해 객체에 할당된 책임과 의도를 기술할 수 있다
            - 객체를 책임의 단위로 볼 수 있다
        - JavaDoc을 사용하면 테스트를 문서처럼 관리가 가능하다

## 레거시 코드

: 오래된 소프트웨어 시스템에 존재하는 코드

- 레거시 코드란 유지보수가 어렵고 코드의 의도를 파악하기 어려운 코드
    - 테스트 코드가 있으면 해결
- 단지 기간이 오래된 코드가 아닌 변경이 어려운(테스트 코드가 없는) 코드를 의미

<aside>
💡

**리팩토링은 테스트가 반드시 동반돼야 한다**

- 코드를 변경한 결과로 입력에 따른 출력이 달라진다면 기능을 변경한 것으로 리팩토링한 것이 아니다
</aside>
